PANDUAN MENJALANKAN AI INVENTORY SYSTEM
=========================================

Dokumen ini berisi langkah-langkah detail untuk menjalankan dan menguji proyek Anda secara lokal.

1. PERSIAPAN LINGKUNGAN (Environment Variables)
-----------------------------------------------
Sebelum menjalankan, pastikan setiap service memiliki file .env dengan kredensial Supabase Anda.

Buat file .env di setiap folder service berikut:

a. product-service/.env
   PORT=3001
   SUPABASE_URL=...
   SUPABASE_KEY=...

b. sales-service/.env
   PORT=4000
   SUPABASE_URL=...
   SUPABASE_KEY=...
   STOCK_SERVICE_URL=http://localhost:3002

c. stock-service/.env
   PORT=3002
   SUPABASE_URL=...
   SUPABASE_KEY=...

d. prediction-service/.env
   SUPABASE_URL=...
   SUPABASE_KEY=...

e. restock-service/.env
   # Opsional (saat ini tidak butuh env khusus)

f. gateaway-service/.env
   PORT=8000
   FRONTEND_URL=http://localhost:5173
   PRODUCT_SERVICE_URL=http://localhost:3001
   SALES_SERVICE_URL=http://localhost:4000
   STOCK_SERVICE_URL=http://localhost:3002
   PREDICTION_SERVICE_URL=http://localhost:5000
   RESTOCK_SERVICE_URL=http://localhost:6000

---

2. LANGKAH-LANGKAH MENJALANKAN (Cara Manual / Lokal)
----------------------------------------------------
Anda perlu membuka **7 Terminal** yang berbeda.

Terminal 1: Gateway Service (http://localhost:8000)
   > cd gateaway-service && npm install && node server.js

Terminal 2: Prediction Service (http://localhost:5000)
   > cd prediction-service && venv\Scripts\activate && python app.py

Terminal 3: Product Service (http://localhost:3001)
   > cd product-service && npm install && node server.js

Terminal 4: Sales Service (http://localhost:4000)
   > cd sales-service && npm install && npm start

Terminal 5: Stock Service (http://localhost:3002)
   > cd stock-service && npm install && npm start

Terminal 6: Restock Service (http://localhost:6000)
   > cd restock-service && pip install -r requirements.txt && python app.py

Terminal 7: Frontend Dashboard (http://localhost:5173)
   > cd frontend-dashboard && npm install && npm run dev

---

3. CARA PENGUJIAN (Testing)
---------------------------

A. Testing via Browser (Manual Test UI)
   1. Buka browser ke: http://localhost:5173
   2. Login sesuai peran:
      - Manager: Akses penuh (termasuk AI & Edit Stok).
      - Staff: Akses Penjualan.
      - User: Hanya lihat produk.
   3. Coba fitur "Kelola Stok", input ID Produk yang valid (lihat di tabel).

B. Testing via Postman (Integration Test)
   Gunakan URL Gateway (http://localhost:8000).

   Contoh URL:
   - Login: POST /login
   - Produk: GET /api/products
   - Stok: GET /api/stock
   - Prediksi (AI): POST /api/predict (Body: { "product_id": 1 })
   - Restock Decision: POST /api/restock

---

4. MENJALANKAN DENGAN DOCKER (Cara Otomatis)
--------------------------------------------
Daripada membuka 6 terminal, Anda bisa menggunakan Docker Compose.

Langkah:
1. Pastikan Docker Desktop berjalan.
2. Buka terminal di folder utama proyek.
3. Jalankan: docker-compose up --build
4. Akses Frontend di http://localhost:5173.
5. Akses Swagger UI di http://localhost:8000/api-docs.

---

5. KUBERNETES (K8s) - Via Docker Desktop
------------------------------------------
Folder k8s/ telah disiapkan untuk deployment menggunakan Kubernetes bawaan Docker Desktop.

Langkah:
1. Pastikan "Enable Kubernetes" dicentang di Settings Docker Desktop.
2. Buka terminal di folder proyek.
3. Build image: docker-compose build
4. Apply Config: kubectl apply -f k8s/configmap.yaml
5. Apply Secret: kubectl apply -f k8s/secrets.yaml
6. Deploy App: kubectl apply -f k8s/
7. Cek Status: kubectl get pods
8. Akses Frontend: http://localhost:30002
